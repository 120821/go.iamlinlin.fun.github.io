---
layout: post
title: "rails 模糊查询 1:n"
date: "2023-09-13"
categories: 
---
<p>rails,中假设储备库和企业是n:1的关系</p>

<pre>
<code><span style="color:#dcc6e0">class</span> <span style="color:#00e0e0">MaterialReserf</span> &lt; ApplicationRecord
  belongs_to <span style="color:#abe338">:enterprise</span>
<span style="color:#dcc6e0">end</span>

<span style="color:#dcc6e0">class</span> <span style="color:#00e0e0">Enterprise</span> &lt; ApplicationRecord
  has_many <span style="color:#abe338">:material_reserfs</span>
<span style="color:#dcc6e0">end</span></code></pre>

<p>想要储备库页面根据企业的名称进行模糊查询，可以这样做：</p>

<pre>
<code>query = <span style="color:#abe338">&#39;企业名称&#39;</span> <span style="color:#d4d0ab"># 你要模糊查询的企业名称</span>

material_reserfs = MaterialReserf.joins(<span style="color:#abe338">:enterprise</span>).where(<span style="color:#abe338">&#39;enterprises.name LIKE ?&#39;</span>, <span style="color:#abe338">&quot;%</span><span style="color:#abe338">#{query}</span><span style="color:#abe338">%&quot;</span>)</code></pre>

<p>&nbsp;</p>

