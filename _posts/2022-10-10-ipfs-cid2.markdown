---
layout: post
title: "ipfs - 学习对cid 进行2种格式的转换"
date: "2022-10-10"
categories: 
---
<p>参考：官网<a href="https://github.com/ensdomains/content-hash">https://github.com/ensdomains/content-hash</a></p>

<p>参考：<a href="https://github.com/ensdomains/ensjs-v3/blob/main/packages/ensjs/src/utils/contentHash.ts">https://github.com/ensdomains/ensjs-v3/blob/main/packages/ensjs/src/utils/contentHash.ts</a>/</p>

<p>安装：npm install content-hash</p>

<p>使用：vim content-hash.js</p>

<pre class="hljs coffeescript">
<span class="hljs-reserved">const</span> contentHash = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#39;content-hash&#39;</span>)

<span class="hljs-reserved">let</span> string_from_ens_query = <span class="hljs-string">&#39;e30101701220fb542ce810ffbcfa68c8a64c7825a8408148822051ab959d448553d09c27df25&#39;</span>
<span class="hljs-reserved">let</span> result = contentHash.decode(string_from_ens_query)
<span class="hljs-built_in">console</span>.info(<span class="hljs-string">&quot;== result: &quot;</span>, result)

<span class="hljs-reserved">let</span> string_from_ens_query_of_vitalik_eth = <span class="hljs-string">&#39;e30101701220d26f29c6d794c4957392c052bacd274b5d32790640c3ffec9fed0c32d8deccf9&#39;</span>

<span class="hljs-reserved">let</span> v0_vitalik_eth = contentHash.decode(string_from_ens_query_of_vitalik_eth)
<span class="hljs-built_in">console</span>.info(<span class="hljs-string">&quot;== vitalik.eth, result:&quot;</span>, v0_vitalik_eth)
<span class="hljs-built_in">console</span>.info(<span class="hljs-string">&quot;== vitalik.eth, CID v1:&quot;</span>, contentHash.helpers.cidV0ToV1Base32(v0_vitalik_eth))</pre>

<p>运行node content-hash.js， 输出：</p>

{% highlight %}== result:&nbsp; QmfFjVBz5wd66kyd89RWkJJiWEMq1Fde3XGN9MBfx47Btp<br />
== vitalik.eth, result: QmcW6e33pgdHaQE4PLKLShEHeyWtzHthanjoyRhaRy9bdA<br />
== vitalik.eth, CID v1: bafybeigsn4u4nv4uyskxhewakk5m2j2lluzhsbsayp76zh7nbqznrxwm7e{% endhighlight %}

<p><img height="514" src="/uploads/ckeditor/pictures/558/image-20221010105505-1.png" width="1920" /></p>

<p>demo：<a href="https://content-hash.surge.sh/">https://content-hash.surge.sh/</a></p>

<p><img height="702" src="/uploads/ckeditor/pictures/559/image-20221010105619-2.png" width="792" /></p>

<p><img src="https://files.sweetysoft.com/blog_images/from_paste_20220919_083032.png" /></p>

