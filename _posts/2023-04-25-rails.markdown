---
layout: post
title: "rails 配置域名"
date: "2023-04-25"
categories: 
---
<p>假设您的应用程序的名称为 myapp ，您需要配置以下内容以使应用程序响应 www.example.com 和 example.com ：</p>

<p>1. 在 DNS 中将 www.example.com 和 example.com 指向您的服务器的 IP 地址。</p>

<p>2. 将以下代码添加到 config/environments/production.rb 中：</p>

<p>```<br />
config.action_dispatch.tld_length = 2<br />
config.hosts &lt;&lt; &quot;www.example.com&quot;<br />
config.hosts &lt;&lt; &quot;example.com&quot;<br />
```</p>

<p>3. 在 config/routes.rb 中添加以下代码：</p>

<p>```<br />
constraints(host: /^example.com/) do<br />
&nbsp; root to: redirect(&quot;http://www.%{host}%{path}&quot;), via: :all<br />
end<br />
```</p>

<p>4. 重新启动您的服务器，并访问您的网站：http://www.example.com/ 或 http://example.com/ 。</p>

<p>以上配置会将 example.com 重定向到 www.example.com 。如果您想将 www.example.com 重定向到 example.com ，可以在 config/routes.rb 中添加以下代码：</p>

<p>```<br />
constraints(host: /^www.example.com/) do<br />
&nbsp; root to: redirect(&quot;http://example.com%{path}&quot;), via: :all<br />
end<br />
```</p>

