---
layout: post
title: "rails 接口 的认识"
date: "2022-06-09"
categories: 
---

                    <h1 id="接口">接口</h1> 
<p>注： 接口(interface) 有若干概念：</p> 
<ol>
<li>移动开发时， app 向服务器端请求数据， 服务器端需要有接口。我们讲的就是这个。</li>
<li>编程语言的特性。例如：在java中， 需要有interface. 每个interface都要有implementation. 不仅仅在java, object c 里面，也是一样。</li>
</ol>
<blockquote> 
 <p>这里说的接口，就是：设计模式中的接口。 我们不讲它。 也不建议使用java/oc 这样的语言。 编程语言中的interface, 虽然比继承( extend, inherit ）功能高级， 但是，不如mix-in好用。</p> 
 <p>是两个不同系统之间， 传递数据的出口 或者 入口。</p> 
 <p>接口跟语言无关。 例如： 字符串， 我可以用java处理，也可以用php, .net, c来处理。</p> 
 <p>所以字符串 是接口中内容的基础。</p> 
 <h2 id="rails中写接口">Rails中写接口</h2> 
 <h2 id="只读的：">只读的：</h2> 
 <h2 id="写数据库的。">写数据库的。</h2> 
</blockquote> 
<blockquote> 
 <h2 id="json-另见一章：-json-入门）">json 入门）</h2> 
 <pre><code>{
  student: {
    name: '小王',
    sex: 'Male',
    age: '18',
    birthday: '1998-10-10'
  }
}
</code></pre> 
 <h2 id="知道接口与-gui的区别。">知道接口与 GUI的区别。</h2> 
 <p>接口： 是给设备用的。 GUI (Graphic User Interface)： 是给人用的。</p> 
 <p>所以，在rails中： 有7个action: new, edit ... 页面，因为RAISL生成的是 GUI.</p> 
 <p>对于接口： 是没有必要有 new, edit 这些内容。</p> 
 <h1 id="接口文档">接口文档</h1> 
 <p>通过后台提供的接口，访问服务器端的数据</p> 
 <h2 id="实现步骤">实现步骤</h2> 
 <h3 id="1统一入口文件">1.统一入口文件</h3> 
 <pre><code>

为了更好的保护、维护我们的代码，通常将接口文件写在项目的：./controllers/interface/目录下。
注：在我们的项目中，android/ios访问同一个接口，pc端直接读取后台数据库。
</code></pre> 
 <h3 id="2接口的实现">2.接口的实现</h3> 
 <pre><code>class Interface::CasesController &lt; ActionController::Base
  def all_cases
    all_cases = Case.all.map  do |the_case|
    { :id =&gt; the_case.id,
      :name =&gt; the_case.name,
      :desc =&gt; the_case.desc,
      :site =&gt; the_case.site,
      :layout_name =&gt; the_case.layout_name,
      :total_area =&gt; the_case.total_area,
      :package_name =&gt; the_case.package_name,
      :cover =&gt; SERVER + the_case.cover_url,
      :style =&gt; the_case.style,
      :layout =&gt; SERVER + the_case.layout.to_s,
    }
  end
    render :json =&gt; { :success =&gt;true, :result =&gt; all_cases}
  end
end
</code></pre> 
 <h3 id="3接口路由的配置">接口路由的配置</h3> 
 <pre><code>namespace :interface do
  resources :init, :only =&gt; [] do
    collection do
      get :index
      get :home_sliders
    end
  end

  resources :cases, :only =&gt; [] do
    collection do
      get :all_cases
      get :all_styles
      get :select_cases_by_style
      get :select_details_by_id
    end
  end
end
</code></pre> 
 <h3 id="4最终接口的调用">4.最终接口的调用</h3> 
 <pre><code>http://域名/interface/cases/all_cases
</code></pre> 
 <h3 id="5返回的结果">5.返回的结果</h3> 
 <pre><code>{
  success: true,
    result: [
      {
        id: 19,
        name: "混搭风，见你所见的情怀",
        desc: "世界那么大，也走过很多东方，领略过地中海长长的海岸线，抚摸过仿佛被水冲刷过的白墙，浅尝过爬藤散发出的阳光芬芳；记忆中亦或是梦里，铺满着家乡的味道。 ",
        site: "北京",
        layout_name: "二室一厅一卫一厨",
        total_area: "110",
        package_name: "老房新装包",
        cover: "http://____2_.jpg",
        style: "混搭",
        layout: "http://__.jpg"
      },
      {
        id: 20,
        name: "时尚是经典的轮回",
        desc: "17世纪爱丽舍宫在巴黎香榭丽舍大街落成，同时期一种思潮古典主义从巴黎席卷欧洲；18世纪许多新材料和工艺的问世，新古典也应运而生， 无论是古典主义还是新古典，都是向古代希腊罗马艺术的高度认同。今天古典主义、新古典依旧散发它特有光环，演绎着当下的时尚。时尚其实就是一场经典的轮回。",
        site: "北京",
        layout_name: "二室一厅二卫一厨",
        total_area: "106",
        package_name: "老房新装包",
        cover: "http://__PS.jpg",
        style: "简欧",
        layout: "http://20/05.jpg"
      }
   ]
}
</code></pre> 
</blockquote>
                
